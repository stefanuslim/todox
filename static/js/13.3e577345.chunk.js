(this.webpackJsonptodox=this.webpackJsonptodox||[]).push([[13],{216:function(e,t,a){"use strict";a.r(t);var n=a(35),i=a(41),s=a(42),r=a(45),o=a(47),l=a(46),c=a(0),d=a.n(c),m=a(5),u=a(233),h=a(211),b=a(230),f=a(227),p=a(217),v=a(157),g=a(229),w=a(165),E=a(163),O=a(160),k=a(218),j=a(123),y=a(226),C=a(166),T=a(167),D=a(164),R=a(168),x=function(e){Object(o.a)(c,e);var t=Object(l.a)(c);function c(e){var a;return Object(i.a)(this,c),(a=t.call(this,e)).state={lists:[],listname:"",importance:0,setReminder:!1,reminder:new Date,notifTimeDelta:.5},a.classes=e.classes,a.state.listname=e.match.params.id,a.updateImportance=a.updateImportance.bind(Object(r.a)(a)),a.updateListname=a.updateListname.bind(Object(r.a)(a)),a.updateReminder=a.updateReminder.bind(Object(r.a)(a)),a.updateReminderTime=a.updateReminderTime.bind(Object(r.a)(a)),a.updateNotifDelta=a.updateNotifDelta.bind(Object(r.a)(a)),a.validateDate=a.validateDate.bind(Object(r.a)(a)),a.createTodo=a.createTodo.bind(Object(r.a)(a)),a}return Object(s.a)(c,[{key:"componentDidMount",value:function(){var e=this;window.setTitle&&window.setTitle("Create New Task"),document.title="Create new task",window.database?window.database.getMultipleByFilters("lists","name",{filter:"__ne",val:""},(function(t){e.setState({lists:t})})):a.e(0).then(a.bind(null,120)).then((function(t){console.log("[indexedDB] Creating database instance");var a=new t.default;a.onsuccess=function(t){window.database=a,a.getMultipleByFilters("lists","name",{filter:"__ne",val:""},(function(t){e.setState({lists:t})}))}}))}},{key:"updateListname",value:function(e){this.setState(Object(n.a)(Object(n.a)({},this.state),{},{listname:e.target.value}))}},{key:"updateImportance",value:function(e){this.setState(Object(n.a)(Object(n.a)({},this.state),{},{importance:e.target.value}))}},{key:"updateReminder",value:function(e){this.setState(Object(n.a)(Object(n.a)({},this.state),{},{setReminder:e.target.checked}))}},{key:"updateReminderTime",value:function(e){this.setState(Object(n.a)(Object(n.a)({},this.state),{},{reminder:e}))}},{key:"updateNotifDelta",value:function(e){this.setState(Object(n.a)(Object(n.a)({},this.state),{},{notifTimeDelta:e.target.value}))}},{key:"validateDate",value:function(){var e=this;if(this.setState(Object(n.a)(Object(n.a)({},this.state),{},{nameError:!1,dateError:!1})),document.getElementById("task-title").value)if(this.state.setReminder){var t,i,s,r=new Date(this.state.reminder),o=this.state.notifTimeDelta;s=10*o,s-=60*(i=(s-s%60)/60),i-=24*(t=(i-i%24)/24),r=Object(T.a)(r,{days:t,hours:i,minutes:s}),Object(D.a)(r)?this.setState(Object(n.a)(Object(n.a)({},this.state),{},{dateError:"You can not choose a past date!"})):Object(R.a)(r,new Date)>25?this.setState(Object(n.a)(Object(n.a)({},this.state),{},{dateError:"Cannot set reminder for a task that is due more than 25 days from now"})):window.database?this.createTodo(r,o):a.e(0).then(a.bind(null,120)).then((function(t){console.log("[indexedDB] Creating database instance");var a=new t.default;a.onsuccess=function(t){window.database=a,e.createTodo(r,o)}}))}else window.database?this.createTodo(null):a.e(0).then(a.bind(null,120)).then((function(t){console.log("[indexedDB] Creating database instance");var a=new t.default;a.onsuccess=function(t){window.database=a,e.createTodo(null)}}));else this.setState(Object(n.a)(Object(n.a)({},this.state),{},{nameError:"Please enter a title for the task"}))}},{key:"createTodo",value:function(e,t){var n=this;window.snackbar&&window.snackbar.show({text:"Creating todo...",showActionButton:!1}),a.e(1).then(a.bind(null,136)).then((function(a){var i=new a.default.Todo({title:document.getElementById("task-title").value,description:document.getElementById("task-description").value,parent:n.state.listname,reminder:e,deadline:n.state.setReminder?n.state.reminder:null,starred:n.state.importance,done:!1,status:0,notifTimeDelta:t},(function(){window.database.add("tasks",i).onsuccess=function(e){e.target.result&&(window.snackbar.show({text:"Created todo.",showActionButton:!1}),n.props.history.goBack())}}))}))}},{key:"render",value:function(){return d.a.createElement("div",{className:this.props.classes.root},d.a.createElement("form",{autoComplete:"false"},d.a.createElement(u.a,{className:this.classes.input,variant:"outlined",label:"Enter task name",id:"task-title",autoComplete:"off",error:!!this.state.nameError,helperText:this.state.nameError||""}),d.a.createElement(u.a,{className:this.classes.input,variant:"outlined",autoComplete:"off",id:"task-description",label:"Enter task details (Optional)",multiline:!0}),d.a.createElement(h.a,{variant:"outlined",className:this.classes.formControl},d.a.createElement(b.a,{id:"list-choosing-label"},"Choose where to add"),d.a.createElement(f.a,{labelId:"list-choosing-label",id:"list-chooser",value:this.state.lists?this.state.listname:-1,disabled:!this.state.lists,onChange:this.updateListname,label:"Choose where to add"},this.state.lists?this.state.lists.map((function(e){return d.a.createElement(p.a,{value:e.id,key:e.id},e.name.capitalize())})):d.a.createElement(p.a,{value:-1},"Loading..."))),d.a.createElement(h.a,{variant:"outlined",className:this.classes.formControl},d.a.createElement(b.a,{id:"importance-choosing-label"},"Important?"),d.a.createElement(f.a,{labelId:"importance-choosing-label",id:"importance-chooser",value:this.state.importance,onChange:this.updateImportance,label:"Important?"},d.a.createElement(p.a,{value:1},"Yes"),d.a.createElement(p.a,{value:0},"No"))),d.a.createElement("div",{className:this.classes.reminders},d.a.createElement("div",{className:this.classes.reminderControl},d.a.createElement(v.a,{component:"span"},"Reminders"),d.a.createElement("div",{className:this.classes.grow}),d.a.createElement(g.a,{checked:this.state.setReminder,onChange:this.updateReminder,color:"primary"})),d.a.createElement(w.a,{in:this.state.setReminder,className:"".concat(this.classes.collapse," ").concat(this.state.setReminder?this.classes.reminderOn:this.classes.reminderOff)},d.a.createElement(j.a,{utils:C.a},d.a.createElement(y.a,{label:"Pick a date & time",variant:"dialog",inputVariant:"outlined",value:this.state.reminder,onChange:this.updateReminderTime,error:!!this.state.dateError,helperText:this.state.dateError||""})),d.a.createElement(h.a,{variant:"outlined"},d.a.createElement(b.a,{id:"notif-delta-choosing-label"},"When should we remind you?"),d.a.createElement(f.a,{labelId:"notif-delta-choosing-label",id:"notif-delta-chooser",value:this.state.notifTimeDelta,onChange:this.updateNotifDelta,label:"When should we remind you?"},d.a.createElement(p.a,{value:.1},"1 min before"),d.a.createElement(p.a,{value:.2},"2 min before"),d.a.createElement(p.a,{value:.5},"5 min before"),d.a.createElement(p.a,{value:1},"10 min before"),d.a.createElement(p.a,{value:1.5},"15 min before"),d.a.createElement(p.a,{value:3},"30 min before"),d.a.createElement(p.a,{value:6},"1 hr before"),d.a.createElement(p.a,{value:12},"2 hr before"),d.a.createElement(p.a,{value:36},"6 hr before"),d.a.createElement(p.a,{value:144},"1 day before")))))),d.a.createElement(E.a,{className:this.classes.fabRight,variant:"extended",color:"primary",onClick:this.validateDate},d.a.createElement(O.a,{className:this.classes.fabIcon}),"Add"),d.a.createElement(E.a,{className:this.classes.fabLeft,variant:"extended",onClick:this.props.history.goBack},d.a.createElement(k.a,{className:this.classes.fabIcon}),"Cancel"))}}]),c}(d.a.Component);t.default=Object(m.a)((function(e){return{root:{display:"block",maxHeight:"calc(85vh - 70px)"},formControl:{margin:e.spacing(1),marginLeft:0,width:"45%"},grow:{flexGrow:1},fabRight:{position:"fixed",bottom:25,right:25},fabLeft:function(){var t={position:"fixed",bottom:25,left:25};return window.innerWidth>e.breakpoints.values.sm&&(t.left=265),t},fabIcon:{marginRight:e.spacing(1)},input:{margin:e.spacing(1),marginLeft:0,width:"100%"},reminders:{width:"100%",margin:e.spacing(1),marginLeft:0,borderRadius:4,border:"1px solid rgba(150, 150, 150, 0.4)","& .MuiTypography-root":{padding:8},"& .MuiSwitch-root":{float:"right"},":hover":{border:"1px solid white"}},reminderControl:{padding:e.spacing(1.5),width:"100%",display:"flex"},reminderOn:{padding:e.spacing(2)},reminderOff:{padding:0},collapse:{"& .MuiFormControl-root":{margin:e.spacing(1),marginLeft:0,width:"-webkit-fill-available"}}}}))(x)}}]);
//# sourceMappingURL=13.3e577345.chunk.js.map